<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Books</title>
    
    <!-- Set Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3Eüìñ%3C/text%3E%3C/svg%3E">

    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìñ Books I Read üìñ</h1>
        </header>

        <div class="divider"></div>

        <div class="action-bar">
            <button class="action-button log-btn" onclick="openLogBookModal()">üìù Log a Book</button>
            <button class="action-button search-btn">üîç Search for a Review</button>
        </div>
        
        <div class="divider"></div>

        <div class="activity-section">
            <div class="activity-tracker">
                
                <!-- Activity Minutes Entry -->
                <div class="activity-row">
                    <span class="activity-text">I, </span>
                    <select id="completer1" class="inline-select name-select"></select>
                    <span class="activity-text">, spent </span>
                    <input type="number" id="minutes" class="inline-number" min="1" value="20">
                    <span class="activity-text"> minutes </span>
                    <input type="text" id="activity1" class="inline-text" list="activityList1" placeholder="activity">
                    <datalist id="activityList1"></datalist>
                    <span class="activity-text">.</span>
                    <button class="inline-submit-btn" onclick="submitActivityMinutes()">Submit</button>
                </div>

                <!-- Activity Times Entry -->
                <div class="activity-row">
                    <span class="activity-text">I, </span>
                    <select id="completer2" class="inline-select name-select"></select>
                    <span class="activity-text">, was </span>
                    <input type="text" id="activity2" class="inline-text" list="activityList2" placeholder="activity">
                    <datalist id="activityList2"></datalist>
                    <span class="activity-text"> </span>
                    <input type="number" id="times" class="inline-number" min="1" value="5">
                    <span class="activity-text"> times.</span>
                    <button class="inline-submit-btn" onclick="submitActivityTimes()">Submit</button>
                </div>

            </div>
        </div>

        <!-- Log Book Modal -->
        <div id="logBookModal" class="modal">
            <div class="modal-content">
                <!-- Step 1: Book and Reader Selection -->
                <div id="modalStep1">
                    <div class="modal-header">
                        <h2>üìñ Log a Book</h2>
                        <button class="close-btn" onclick="closeLogBookModal()">&times;</button>
                    </div>
                    
                    <div class="form-group">
                        <label for="bookSearch">Book</label>
                        <input type="text" id="bookSearch" name="bookSearch" placeholder="Start typing book name..." autocomplete="off">
                        <div id="autocompleteResults" class="autocomplete-results"></div>
                    </div>

                    <div class="form-group">
                        <label for="readerSelect">Reader</label>
                        <select id="readerSelect" name="readerSelect">
                            <option value="Ellen">Ellen</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="cancel-btn" onclick="closeLogBookModal()">Cancel</button>
                        <button type="button" class="submit-btn" onclick="handleLog()">Log</button>
                        <button type="button" class="log-btn" onclick="handleAddNew()">Add New Book</button>
                    </div>
                </div>

                <!-- Step 2a: Update Existing Log -->
                <div id="modalStep2a" style="display: none;">
                    <div class="modal-header">
                        <h2>üìù Update Log</h2>
                        <button class="close-btn" onclick="closeLogBookModal()">&times;</button>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="updateChildRating">Child Rating</label>
                            <select id="updateChildRating" name="updateChildRating">
                                <option value="">Select rating...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="updateAdultRating">Adult Rating</label>
                            <select id="updateAdultRating" name="updateAdultRating">
                                <option value="">Select rating...</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="timesAlreadyRead">Times Already Read</label>
                            <input type="number" id="timesAlreadyRead" name="timesAlreadyRead" readonly style="background-color: #f0f0f0; cursor: not-allowed;">
                        </div>

                        <div class="form-group">
                            <label for="readsToAdd">Reads to Add</label>
                            <input type="number" id="readsToAdd" name="readsToAdd" min="0" value="1">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="existingComment">Comment</label>
                        <textarea id="existingComment" name="existingComment" placeholder="Share your thoughts about this book..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="cancel-btn" onclick="showStep1()">Back</button>
                        <button type="button" class="submit-btn" onclick="saveLog()">Update Log</button>
                    </div>
                </div>

                <!-- Step 2b: Add New Book -->
                <div id="modalStep2b" style="display: none;">
                    <div class="modal-header">
                        <h2>‚ûï Add New Book</h2>
                        <button class="close-btn" onclick="closeLogBookModal()">&times;</button>
                    </div>

                    <div class="form-group">
                        <label for="newTitle">Title *</label>
                        <input type="text" id="newTitle" name="newTitle" required>
                    </div>

                    <div class="form-group">
                        <label for="newAuthor">Author *</label>
                        <input type="text" id="newAuthor" name="newAuthor" required>
                    </div>

                    <div class="form-group">
                        <label for="newType">Type *</label>
                        <select id="newType" name="newType" required>
                            <option value="">Select type...</option>
                            <option value="Board Book">Board Book</option>
                            <option value="Short Picture Book">Short Picture Book</option>
                            <option value="Picture Book">Picture Book</option>
                            <option value="Early Reader">Early Reader</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="newChildRating">Child Rating</label>
                        <select id="newChildRating" name="newChildRating">
                            <option value="">Select rating...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="newAdultRating">Adult Rating</label>
                        <select id="newAdultRating" name="newAdultRating">
                            <option value="">Select rating...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="newTimesRead">Times Read</label>
                        <input type="number" id="newTimesRead" name="newTimesRead" min="1" value="1">
                    </div>

                    <div class="form-group">
                        <label for="newComment">Comment</label>
                        <textarea id="newComment" name="newComment" placeholder="Share your thoughts about this book..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="submit-btn" onclick="saveNewBook()">Save Book</button>
                    </div>
                </div>


            </div>
        </div>

        <div class="divider"></div>

        <div class="chart-section">
            <h2 style="color: #C04A7A; margin-bottom: 20px;">Most Read Books</h2>
            <div id="barChart" class="bar-chart-container">
                <div class="loading">Loading chart...</div>
            </div>
        </div>

        <div class="divider"></div>

        <div class="review-section">
            <div class="book-header">
                <div class="book-info">
                    <h2 class="book-title">The Little Yellow Digger</h2>
                    <h3 class="book-author">Betty and Alan Gilderdale</h3>
                    <h4 class="review_date">Reviewed: 2025-12-23</h4>
                    <h4 class="reviews">Child: üîÅ Obsessed / Adult: üö® Hide It</h4>
                </div>
                <div class="book-cover">
                    <img src="reviewphotos/littleyellowdigger/cover.jpg" alt="The Little Yellow Digger cover">
                </div>
            </div>

            <div class="review-content-with-sidebar">
                <div class="main-content">
                    <div class="review-content">
                        <p>This is what I would read if I wanted to continue the torture of my workday into my off hours. It describes the terrible choices made by probably aging white men with protruding bellies when faced with a problem.</p>
                        <br>
                        <p>Because at my work, when something goes wrong, we don't sit back, assess and then ask the smartest person in the room what might be the best solution. We just go bigger. We go bolder. We get more bigger diggers.</p>
                        <br>
                        <p>And this is exactly what happens in this children's book, the digger is stuck so instead of any lateral thinking, a bigger digger is ordered in immediately. To the absolute delight of my three-year-old. And every time, I am met with crippling angst that this is where the bad decision making starts. That this is why as a society we must end up four stuck diggers in before we realise (via a meeting that should have been an email) that it is a different variable that needs adjusting, in this instance ‚Äì rain.</p>
                    </div>
                </div>
                <div class="sidebar-image">
                    <img src="reviewphotos/littleyellowdigger/sidepicture.jpg" alt="Side image">
                </div>
            </div>

            <div class="image-groups">
                <div class="image-group">
                    <div class="book-image">
                        <img src="reviewphotos/littleyellowdigger/picture1.jpg" alt="Book image 1">
                    </div>
                    <div class="book-image">
                        <img src="reviewphotos/littleyellowdigger/picture2.jpg" alt="Book image 2">
                    </div>
                </div>
                <div class="image-group">
                    <div class="book-image">
                        <img src="reviewphotos/littleyellowdigger/picture3.jpg" alt="Book image 3">
                    </div>
                    <div class="book-image">
                        <img src="reviewphotos/littleyellowdigger/picture4.jpg" alt="Book image 4">
                    </div>
                </div>
            </div>

            <div class="review-content">
                <p>And so, I finish the book thinking well, tomorrow there will be yet another day of my workplace ordering more diggers, bigger diggers, more shitty staff, more licences, bigger computers rather than looking laterally for the optimal solution and perhaps asking the intelligent engineers what they think. Rest assured, they will ask the dumb engineers because they will undoubtedly answer, in unison with my three year old ‚Äì MORE! BIGGER! DIGGER!</p>
            </div>
        </div>

        <div class="divider"></div>

        <div class="review-section">
            <div class="book-header">
                <div class="book-info">
                    <h2 class="book-title">All Birds Have Anxiety</h2>
                    <h3 class="book-author">Kathy Hoopmann</h3>
                    <h4 class="review_date">Reviewed: 2025-12-26</h4>
                    <h4 class="reviews">Child: üö´ Rejected / Adult: ‚ù§Ô∏è Love Reading It</h4>
                </div>
                <div class="book-cover">
                    <img src="reviewphotos/allbirdshaveanxiety/cover.jpg" alt="All Birds Have Anxiety cover">
                </div>
            </div>

            <div class="review-content">
                        <p>So I'm usually not a fan of 'message books' for kids. Not deep messages anyway, Ordinarily I just want to enjoy lack of plot, bright colours and animals sounds before all the animals quietly go to bed (real and imagined).</p>
                        <br>
                        <p>However, as I have been influenced by seemingly half the male millennials around me turning into birders, I too am now tickled pink by birds.  And this book.</p>
            </div>

            <div class="image-groups">
                <div class="image-group">
                    <div class="book-image">
                        <img src="reviewphotos/allbirdshaveanxiety/picture1.jpg" alt="Book image 1">
                    </div>
                    <div class="book-image">
                        <img src="reviewphotos/allbirdshaveanxiety/picture2.jpg" alt="Book image 2">
                    </div>
                </div>
                <div class="image-group">
                    <div class="book-image">
                        <img src="reviewphotos/allbirdshaveanxiety/picture3.jpg" alt="Book image 3">
                    </div>
                    <div class="book-image">
                        <img src="reviewphotos/allbirdshaveanxiety/picture4.jpg" alt="Book image 4">
                    </div>
                </div>
            </div>

            <div class="review-content">
                <p>Because if there is one way to drive home truths about life and the anxious state we all live in, it's with lovely pictures of birds.</p>
            </div>
        </div>

                <div class="divider"></div>

        <div class="review-section">
            <div class="book-header">
                <div class="book-info">
                    <h2 class="book-title">Where is the Green Sheep?</h2>
                    <h3 class="book-author">Mem Fox</h3>
                    <h4 class="review_date">Reviewed: 2025-12-26</h4>
                    <h4 class="reviews">Child: üëç Happy Listener / Adult: ‚ù§Ô∏è Love Reading It</h4>
                </div>
                <div class="book-cover">
                    <img src="reviewphotos/whereisthegreensheep/cover.jpg" alt="Where Is The Green Sheep cover">
                </div>
            </div>

            <div class="review-content-with-sidebar">
                <div class="main-content">
                    <div class="review-content">
                        <p>It's a classic.  I have no faults with it because what doesn't this book do!!</p>
                        <br>
                        <p>This book has rhyme, it's about an animal, it has colors, so many colors.  It has directions, it has interests.  You can spend five minutes on page 15 examining who is in the train or you can say train choo choo and move on with your life because tonight is an early bed night.</p>
                        <br>
                        <p>I did hear many children cry during the stage version of Where is the Green Sheep but I will happily chalk that up to people look really weird in sheep costumes and children are stupid.</p>
                        <br>
                        <p>This book has nothing that isn't prefect for me. From moving the book impossibly close to my child's face for the near sheep (hilarious, every time) to being able to join in the refrain 'but where is the green sheep?'. This is, hands down a great book.</p>
                        </div>
                </div>
                <div class="sidebar-image">
                    <img src="reviewphotos/whereisthegreensheep/sidepicture.jpg" alt="Side image">
                </div>
            </div>

        </div>
    </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
  
</body>
</html>